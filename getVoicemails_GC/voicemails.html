<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Voicemails</title>
  <script src="https://sdk-cdn.mypurecloud.com/javascript/0.84.8/purecloud-api.min.js"></script>
</head>

<body>
  <script type="text/javascript">
    // const platformClient = require('purecloud-platform-client-v2');
    
    // const platformClient = require('platformClient');
    
    var environment = "cac1.pure.cloud";
    var clientId = '00cd1850-dfa8-4312-a314-48e7b728429f';
    var redirectUri = "http://localhost:8080/oauth/callback";
    const host = "https://cac1.pure.cloud"
    // const client = platformClient.ApiClient.instance;
    // client.setEnvironment(platformClient.PureCloudRegionHosts.ca_central_1);

    const pureCloudSession = purecloud.platform.PureCloudSession({
			timeout: 20000,
			strategy: 'implicit',
			clientId: clientId,
			redirectUrl: 'http://localhost/oauth/token',
			// redirectUrl: redirectUrl,
			environment: environment
		});

    const usersApi = new purecloud.platform.UsersApi(pureCloudSession);
    pureCloudSession.login()
			.then(() => {
				return usersApi.getMe();
			})
			.then((me) => {
				_me = me;
				console.log(`Welcome ${me.name}`);
			})
    // client.loginImplicitGrant(clientId, redirectUri)
    //   .then((data) => {
    //     console.log(data);
    //     // Do authenticated things
    //   })
    //   .catch((err) => {
    //     // Handle failure response
    //     console.log(err);
    //   });
  </script>
</body>

</html>